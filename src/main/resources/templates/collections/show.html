<div xmlns:th="http://www.thymeleaf.org"
     th:replace="~{layout/base :: layout(~{::section})}">

  <section class="mx-auto w-full max-w-6xl px-4 py-10 md:px-6 md:py-14">

    <!-- Back -->
    <div class="mb-6">
      <a href="/collections"
         class="inline-flex items-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm font-semibold text-white/80 hover:bg-white/10">
        ← Back to collections
      </a>
    </div>

    <!-- Hero -->
    <div class="overflow-hidden rounded-3xl border border-white/10 bg-[#121212]">
      <div class="relative aspect-[16/7] w-full overflow-hidden">

        <!-- Hero image -->
        <div th:if="${collection.heroImagePath != null and !#strings.isEmpty(collection.heroImagePath)}"
             class="absolute inset-0 bg-cover bg-center"
             th:style="|background-image:url('${collection.heroImagePath}');|">
        </div>

        <!-- Fallback -->
        <div th:if="${collection.heroImagePath == null or #strings.isEmpty(collection.heroImagePath)}"
             class="absolute inset-0 opacity-70"
             style="background:
               radial-gradient(circle at 30% 30%, rgba(24,255,234,.35), transparent 55%),
               radial-gradient(circle at 80% 70%, rgba(255,255,255,.16), transparent 60%);">
        </div>

        <!-- Overlay -->
        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/25 to-transparent"></div>

        <!-- Copy -->
        <div class="absolute bottom-0 left-0 right-0 p-6 md:p-10">
          <p class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-black/30 px-3 py-1 text-xs text-white/70 backdrop-blur">
            <span class="h-1.5 w-1.5 rounded-full" style="background:#18FFEA;"></span>
            Collection
          </p>

          <h1 class="mt-4 text-3xl font-extrabold tracking-tight md:text-5xl"
              th:text="${collection.name}">
            Collection Name
          </h1>

          <p class="mt-3 max-w-3xl text-sm text-white/70 md:text-base"
             th:if="${collection.description != null and !#strings.isEmpty(collection.description)}"
             th:text="${collection.description}">
            Description
          </p>

          <div class="mt-5 text-sm text-white/60">
            <span th:text="${#lists.size(collection.collectionDesigns)}">0</span> design(s)
          </div>
        </div>
      </div>
    </div>

    <!-- Section header -->
    <div class="mt-10 flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
      <div>
        <h2 class="text-xl font-bold md:text-2xl">Designs in this collection</h2>
        <p class="mt-1 text-sm text-white/60">Curated picks. No clutter.</p>
      </div>
    </div>

    <!-- Designs Grid -->
    <div class="mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3">

      <!-- Empty state -->
      <div th:if="${#lists.isEmpty(collection.collectionDesigns)}"
           class="rounded-3xl border border-white/10 bg-white/5 p-6">
        <p class="text-sm font-semibold text-white">Nothing here yet</p>
        <p class="mt-2 text-sm text-white/70">This collection doesn’t have any designs assigned yet.</p>
      </div>

      <!-- Cards -->
      <a th:each="cd : ${collection.collectionDesigns}"
         th:with="d=${cd.design}"
         th:href="@{/designs/{slug}(slug=${d.slug})}"
         class="group overflow-hidden rounded-3xl border border-white/10 bg-[#121212] transition hover:border-white/20">

        <!-- Thumbnail -->
        <div class="relative aspect-square overflow-hidden bg-black/30">
          <div th:if="${d.heroImagePath != null and !#strings.isEmpty(d.heroImagePath)}"
               class="absolute inset-0 bg-cover bg-center transition-transform duration-300 group-hover:scale-[1.05]"
               th:style="|background-image:url('${d.heroImagePath}');|">
          </div>

          <div th:if="${d.heroImagePath == null or #strings.isEmpty(d.heroImagePath)}"
               class="absolute inset-0 opacity-70"
               style="background:
                 radial-gradient(circle at 30% 30%, rgba(24,255,234,.30), transparent 60%),
                 radial-gradient(circle at 80% 70%, rgba(255,255,255,.16), transparent 60%);">
          </div>

          <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"></div>
        </div>

        <!-- Copy -->
        <div class="p-5">
          <p class="text-base font-semibold text-white" th:text="${d.title}">
            Design Title
          </p>
          <p class="mt-1 text-sm text-white/60">
            View design
          </p>
        </div>
      </a>

    </div>

  </section>
</div>